class Weapon:
    """
    Η κλάση Weapon αναπαριστά ένα όπλο με μηχανισμό cooldown.

    Ο ρόλος της είναι να ελέγχει:
    - πότε επιτρέπεται να πυροβολήσει ο παίκτης
    - πόσος χρόνος πρέπει να περάσει ανάμεσα σε δύο βολές

    Δεν γνωρίζει ΤΙ πυροβολεί ούτε ΠΟΥ,
    αλλά μόνο το ΠΟΤΕ επιτρέπεται να πυροβολήσει.
    """

    def __init__(self, cooldown=2.0):
        """
        Constructor της κλάσης Weapon.

        cooldown:
        ο χρόνος (σε δευτερόλεπτα) που πρέπει να περάσει
        ανάμεσα σε δύο πυροβολισμούς.
        """

        # Αποθηκεύουμε το cooldown του όπλου
        self.cooldown = cooldown

        # Εσωτερικός χρονομετρητής που μετρά
        # πόσος χρόνος απομένει μέχρι το επόμενο επιτρεπτό shot
        self._timer = 0.0

    def update(self, dt):
        """
        Ενημερώνει τον εσωτερικό χρονομετρητή του όπλου.

        dt:
        ο χρόνος που πέρασε από το προηγούμενο frame (σε δευτερόλεπτα)
        """

        # Μειώνουμε τον χρονομετρητή κατά dt
        # Δεν επιτρέπουμε να γίνει αρνητικός
        self._timer = max(0.0, self._timer - dt)

    def can_fire(self):
        """
        Ελέγχει αν το όπλο μπορεί να πυροβολήσει αυτή τη στιγμή.

        Επιστρέφει:
        True  -> το όπλο είναι έτοιμο
        False -> το όπλο βρίσκεται ακόμα σε cooldown
        """

        return self._timer <= 0.0

    def fired(self):
        """
        Καλείται όταν το όπλο πυροβολήσει.

        Θέτει τον χρονομετρητή ίσο με το cooldown,
        ξεκινώντας νέο κύκλο αναμονής.
        """

        self._timer = self.cooldown
