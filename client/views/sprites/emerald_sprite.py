import pygame
import os


class EmeraldSprite:
    """
    Κλάση υπεύθυνη για την οπτική αναπαράσταση του emerald (διαμάντι).

    Η κλάση αυτή:
    - δεν περιέχει καμία λογική gameplay
    - δεν γνωρίζει τίποτα για score ή συλλογή
    - έχει αποκλειστική ευθύνη τη φόρτωση και σχεδίαση του sprite

    Ανήκει καθαρά στο View layer της εφαρμογής.
    """

    def __init__(self):
        # --------------------------------------------------
        # Εντοπισμός του φακέλου του αρχείου με ασφάλεια
        # --------------------------------------------------
        # base_dir: ο φάκελος όπου βρίσκεται το αρχείο emerald_sprite.py
        base_dir = os.path.dirname(__file__)

        # --------------------------------------------------
        # Δημιουργία πλήρους διαδρομής προς το emerald sprite
        # --------------------------------------------------
        # Με το os.path.join αποφεύγουμε προβλήματα σε διαφορετικά λειτουργικά
        sprite_path = os.path.join(
            base_dir,
            "..", "..",
            "assets", "sprites", "emerald.png"
        )

        # --------------------------------------------------
        # Φόρτωση της εικόνας emerald
        # --------------------------------------------------
        # convert_alpha():
        # - επιτρέπει διαφάνεια (alpha channel)
        # - βελτιώνει την απόδοση στο blitting
        self.image = pygame.image.load(sprite_path).convert_alpha()

        # --------------------------------------------------
        # Κλιμάκωση εικόνας σε 32x32 pixels
        # --------------------------------------------------
        # Το μέγεθος αυτό αντιστοιχεί σε ένα tile του παιχνιδιού
        self.image = pygame.transform.scale(self.image, (32, 32))

    def draw(self, surface, x, y):
        """
        Σχεδιάζει το emerald στην οθόνη.

        surface : pygame Surface (κύρια οθόνη ή υπο-επιφάνεια)
        x, y    : συντεταγμένες οθόνης (screen coordinates)

        Σημείωση:
        - Οι συντεταγμένες έχουν ήδη μετατραπεί από world → screen
        - Η κλάση Camera ΔΕΝ εμπλέκεται εδώ
        """

        # --------------------------------------------------
        # Σχεδίαση της εικόνας στην επιφάνεια
        # --------------------------------------------------
        surface.blit(self.image, (x, y))
